import{v as B,a as N,w as S,b as L}from"./runtime-dom.esm-bundler.STX-4lLy.js";import{u as K}from"./useAuth.DooR_B9j.js";import{c as a,a as n,F as x,r as f,t as l,n as w,b as d,w as p,d as O,e as c,f as j,o as s}from"./runtime-core.esm-bundler.BrNsztqg.js";import"./store.D_n1941p.js";import"./auth.DG5h8cRj.js";import"./appwrite.Cu45kNVr.js";const U=(m,t)=>{const i=m.__vccOpts||m;for(const[e,v]of t)i[e]=v;return i},V=O({__name:"Navbar",setup(m,{expose:t}){t();const i=[{text:"Dashboard",url:"/dashboard"},{text:"Inventory",url:"/inventory"},{text:"Partners",url:"/partners"}],{user:e,isAuthenticated:v,currentTeam:b,teams:o,ownedTeam:g,isPartner:P,loading:z,switchTeam:y,createTeam:_,inviteMember:k,logout:C}=K(),A=c(!1),T=c(!1),M=c(!1),u=c(""),h=c(""),E=j(()=>e.value&&e.value.name?e.value.name.charAt(0).toUpperCase():"?"),I={navLinks:i,user:e,isAuthenticated:v,currentTeam:b,teams:o,ownedTeam:g,isPartner:P,loading:z,switchTeam:y,createTeam:_,inviteMember:k,authLogout:C,openMobile:A,showCreateModal:T,showInviteModal:M,newTeamName:u,inviteEmail:h,userInitial:E,logout:async()=>{await C()},handleSwitchTeam:async r=>{await y(r)},handleCreateTeam:async()=>{if(u.value)try{await _(u.value),T.value=!1,u.value=""}catch(r){alert(r.message)}},handleInvite:async()=>{if(!(!h.value||!b.value))try{await k(b.value.$id,h.value),M.value=!1,h.value="",alert("Invitation sent!")}catch(r){alert(r.message)}}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),D={class:"navbar max-w-screen-lx mx-auto"},F={class:"navbar-end md:pr-2 lg:pr-8"},q=["href"],H={key:0,class:"hidden md:inline-flex items-center gap-2"},R={key:1,class:"hidden md:inline-flex items-center gap-2"},G={key:0,href:"/login",class:"btn btn-ghost"},J={key:1,class:"flex items-center gap-2"},Q={class:"dropdown dropdown-end mr-2"},W={tabindex:"0",role:"button",class:"btn btn-ghost btn-sm gap-2"},X={tabindex:"0",class:"dropdown-content z-[50] menu p-2 shadow bg-base-100 rounded-box w-52"},Y=["onClick"],Z={key:0},$={key:1},ee={class:"dropdown dropdown-end"},ne={tabindex:"0",role:"button",class:"btn btn-ghost avatar placeholder cursor-pointer"},te={class:"bg-neutral text-neutral-content rounded-full w-10"},oe={class:"text-xs"},ae={tabindex:"0",class:"mt-3 z-50 p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52"},se={key:0},le={class:"fixed inset-0 bg-primary flex flex-col items-center justify-center space-y-6 z-50 transition-all"},ie=["href"],re={key:0,class:"flex flex-col items-center gap-4"},de={key:1,class:"flex flex-col items-center gap-2"},ce={class:"text-lg font-bold text-primary-content"},me={key:0,class:"badge badge-secondary"},ve={class:"modal-box"},be={class:"py-4"},ue=["onKeydown"],he={class:"modal-action"},we=["disabled"],ge={class:"modal-box"},xe={class:"py-4"},fe=["onKeydown"],pe={class:"modal-action"},ye=["disabled"];function _e(m,t,i,e,v,b){return s(),a("nav",D,[t[21]||(t[21]=n("div",{class:"navbar-start md:pl-2 lg:pl-8"},[n("a",{href:"/",class:"btn btn-ghost text-xl font-bold text-primary"},"Resale Command")],-1)),t[22]||(t[22]=n("div",{class:"navbar-center"},null,-1)),n("div",F,[(s(),a(x,null,f(e.navLinks,o=>n("a",{key:o.url,href:o.url,class:"hidden md:inline-flex btn btn-lg btn-ghost hover:bg-base-200"},l(o.text),9,q)),64)),e.loading?(s(),a("div",H,[...t[12]||(t[12]=[n("button",{class:"btn btn-ghost"},[n("span",{class:"loading loading-spinner loading-sm"})],-1)])])):(s(),a("div",R,[e.isAuthenticated?(s(),a("div",J,[n("div",Q,[n("div",W,[n("span",null,l(e.currentTeam?e.currentTeam.name:"Personal Inventory"),1),t[13]||(t[13]=n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})],-1))]),n("ul",X,[n("li",null,[n("a",{onClick:t[0]||(t[0]=o=>e.handleSwitchTeam(null)),class:w({active:!e.currentTeam})},"Personal Inventory",2)]),(s(!0),a(x,null,f(e.teams,o=>(s(),a("li",{key:o.$id},[n("a",{onClick:g=>e.handleSwitchTeam(o),class:w({active:e.currentTeam&&e.currentTeam.$id===o.$id})},l(o.name),11,Y)]))),128)),t[14]||(t[14]=n("div",{class:"divider my-0"},null,-1)),e.ownedTeam?d("",!0):(s(),a("li",Z,[n("a",{onClick:t[1]||(t[1]=o=>e.showCreateModal=!0)},"+ Create Organization")])),e.currentTeam&&e.ownedTeam&&e.currentTeam.$id===e.ownedTeam.$id?(s(),a("li",$,[n("a",{onClick:t[2]||(t[2]=o=>e.showInviteModal=!0)},"+ Invite Member")])):d("",!0)])]),n("div",ee,[n("div",ne,[n("div",te,[n("span",oe,l(e.userInitial),1)])]),n("ul",ae,[e.isPartner?(s(),a("li",se,[...t[15]||(t[15]=[n("div",{class:"badge badge-secondary w-full"},"Partner",-1)])])):d("",!0),n("li",null,[n("a",{onClick:e.logout},"Logout")])])])])):(s(),a("a",G,"Login"))])),n("button",{onClick:t[3]||(t[3]=o=>e.openMobile=!e.openMobile),class:"btn btn-square btn-ghost md:hidden","aria-label":"Menü öffnen"},[...t[16]||(t[16]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","inline-block":"",class:"w-5 h-5 stroke-current"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),p(n("div",le,[n("button",{onClick:t[4]||(t[4]=o=>e.openMobile=!1),class:"absolute top-6 right-6 text-4xl focus:outline-none"},"×"),(s(),a(x,null,f(e.navLinks,o=>n("a",{key:o.url,href:o.url,class:"text-2xl text-primary-content hover:text-accent",onClick:t[5]||(t[5]=g=>e.openMobile=!1)},l(o.text),9,ie)),64)),e.loading?d("",!0):(s(),a("div",re,[e.isAuthenticated?(s(),a("div",de,[n("span",ce,"Hello, "+l(e.user?e.user.name:"User"),1),e.isPartner?(s(),a("span",me,"Partner")):d("",!0),n("a",{onClick:t[7]||(t[7]=o=>{e.logout(),e.openMobile=!1}),class:"text-2xl text-primary-content hover:text-accent cursor-pointer"},"Logout")])):(s(),a("a",{key:0,href:"/login",class:"text-2xl text-primary-content hover:text-accent",onClick:t[6]||(t[6]=o=>e.openMobile=!1)},"Login"))]))],512),[[B,e.openMobile]])]),n("dialog",{class:w(["modal",{"modal-open":e.showCreateModal}])},[n("div",ve,[t[17]||(t[17]=n("h3",{class:"font-bold text-lg"},"Create New Organization",-1)),t[18]||(t[18]=n("p",{class:"py-2 text-sm"},"Create a shared workspace.",-1)),n("div",be,[p(n("input",{type:"text",placeholder:"Organization Name",class:"input input-bordered w-full","onUpdate:modelValue":t[8]||(t[8]=o=>e.newTeamName=o),onKeydown:S(L(e.handleCreateTeam,["prevent"]),["enter"])},null,40,ue),[[N,e.newTeamName]])]),n("div",he,[n("button",{class:"btn",onClick:t[9]||(t[9]=o=>e.showCreateModal=!1)},"Cancel"),n("button",{class:"btn btn-primary",onClick:e.handleCreateTeam,disabled:!e.newTeamName},"Create",8,we)])])],2),n("dialog",{class:w(["modal",{"modal-open":e.showInviteModal}])},[n("div",ge,[t[19]||(t[19]=n("h3",{class:"font-bold text-lg"},"Invite New Member",-1)),t[20]||(t[20]=n("p",{class:"py-2 text-sm"},"Send an invitation email.",-1)),n("div",xe,[p(n("input",{type:"email",placeholder:"Email Address",class:"input input-bordered w-full","onUpdate:modelValue":t[10]||(t[10]=o=>e.inviteEmail=o),onKeydown:S(L(e.handleInvite,["prevent"]),["enter"])},null,40,fe),[[N,e.inviteEmail]])]),n("div",pe,[n("button",{class:"btn",onClick:t[11]||(t[11]=o=>e.showInviteModal=!1)},"Cancel"),n("button",{class:"btn btn-primary",onClick:e.handleInvite,disabled:!e.inviteEmail},"Send Invite",8,ye)])])],2)])}const Ae=U(V,[["render",_e]]);export{Ae as default};
